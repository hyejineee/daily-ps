# ë°±íŠ¸ë˜í‚¹(Backtracking) ì™„ë²½ ì •ë¦¬

## ë°±íŠ¸ë˜í‚¹ì´ë€?

**"ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•˜ë˜, ë¶ˆê°€ëŠ¥í•œ ê²½ë¡œëŠ” ì¼ì° í¬ê¸°í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜"**

í•µì‹¬: **ì„ íƒ â†’ íƒìƒ‰ â†’ ì„ íƒ ì·¨ì†Œ (ë˜ëŒë¦¬ê¸°)**

---

## ì–¸ì œ ë°±íŠ¸ë˜í‚¹ì„ ì‚¬ìš©í•˜ë‚˜?

### âœ… ë°±íŠ¸ë˜í‚¹ì„ ì“°ëŠ” ë¬¸ì œ

#### 1. í‚¤ì›Œë“œë¡œ íŒë‹¨
- **"ëª¨ë“  ~ì„ êµ¬í•˜ì‹œì˜¤"**
- **"ê°€ëŠ¥í•œ ëª¨ë“  ì¡°í•©/ìˆœì—´"**
- **"ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜"**
- **"ì¤‘ë³µ ì—†ì´ Mê°œ ì„ íƒ"**

#### 2. ë¬¸ì œ íŠ¹ì§•
```
âœ“ ëª¨ë“  ê²½ìš°ë¥¼ íƒìƒ‰í•´ì•¼ í•¨
âœ“ ì„ íƒì— ì œì•½ ì¡°ê±´ì´ ìˆìŒ (ì¤‘ë³µ ë¶ˆê°€, í•© ì œí•œ ë“±)
âœ“ í•œ ë²ˆ ì‚¬ìš©í•œ ê²ƒì„ ë‹¤ë¥¸ ê²½ë¡œì—ì„œ ë‹¤ì‹œ ì‚¬ìš©í•´ì•¼ í•¨
âœ“ ë‹µì´ ì—¬ëŸ¬ ê°œ
```

### âŒ ë°±íŠ¸ë˜í‚¹ì´ ì•„ë‹Œ ê²½ìš°

```
âœ— ìµœëŒ“ê°’/ìµœì†Ÿê°’ë§Œ êµ¬í•˜ê¸° â†’ ë‹¨ìˆœ ë°˜ë³µë¬¸
âœ— ìµœë‹¨ ê±°ë¦¬ ì°¾ê¸° â†’ BFS/DFS
âœ— í•˜ë‚˜ì˜ ê²½ë¡œë§Œ ì°¾ê¸° â†’ DFS
```

---

## ë°±íŠ¸ë˜í‚¹ ì½”ë“œ íŒ¨í„´

### ê¸°ë³¸ í…œí”Œë¦¿

```javascript
function backtrack(í˜„ì¬ìƒíƒœ) {
    // 1. ì¢…ë£Œ ì¡°ê±´: ì›í•˜ëŠ” ê²°ê³¼ ì™„ì„±
    if (ì™„ì„±ì¡°ê±´) {
        ê²°ê³¼_ì €ì¥_ë˜ëŠ”_ì¶œë ¥();
        return;
    }

    // 2. ê°€ëŠ¥í•œ ëª¨ë“  ì„ íƒ ì‹œë„
    for (let ì„ íƒ of ê°€ëŠ¥í•œ_ì„ íƒë“¤) {
        if (ì œì•½ì¡°ê±´_ë§Œì¡±) {
            ì„ íƒí•˜ê¸°();           // visited[i] = true, arr.push(i)
            backtrack(ë‹¤ìŒìƒíƒœ);  // ì¬ê·€ í˜¸ì¶œ
            ì„ íƒ_ì·¨ì†Œí•˜ê¸°();      // visited[i] = false, arr.pop()
        }
    }
}
```

### Nê³¼ M (1) ì‹¤ì œ ì½”ë“œ

```javascript
const solution = (n, m) => {
    const visited = Array.from({ length: n + 1 }, () => false);

    const backtrack = (arr) => {
        // ì¢…ë£Œ ì¡°ê±´: ê¸¸ì´ê°€ mì´ ë˜ë©´
        if (arr.length === m) {
            console.log(arr.join(' '));
            return;
        }

        // 1ë¶€í„° nê¹Œì§€ ì‹œë„
        for (let i = 1; i <= n; i++) {
            if (!visited[i]) {
                visited[i] = true;    // ì„ íƒ
                arr.push(i);

                backtrack(arr);       // ì¬ê·€

                arr.pop();            // ì„ íƒ ì·¨ì†Œ
                visited[i] = false;   // ë°±íŠ¸ë˜í‚¹
            }
        }
    };

    backtrack([]);
};
```

---

## ì„ íƒ ì·¨ì†Œë¥¼ ì™œ í•´ì•¼ í• ê¹Œ?

### ë¹„ìœ : ë ˆìŠ¤í† ë‘ ì˜ì ì„ íƒ

```
âŒ ì„ íƒ ì·¨ì†Œ ì•ˆ í•˜ë©´:
ì†ë‹˜1: ì˜ì1,2 ì•‰ìŒ â†’ [1,2] ì™„ì„±
ì†ë‹˜2: ì˜ì1,2ê°€ ì—¬ì „íˆ "ì‚¬ìš©ì¤‘" â†’ ì„ íƒ ë¶ˆê°€!

âœ… ì„ íƒ ì·¨ì†Œ í•˜ë©´:
ì†ë‹˜1: ì˜ì1,2 ì•‰ìŒ â†’ [1,2] ì™„ì„± â†’ ì¼ì–´ë‚¨(í•´ì œ)
ì†ë‹˜2: ì˜ì1,3 ì•‰ìŒ â†’ [1,3] ì™„ì„± â†’ ì¼ì–´ë‚¨
ì†ë‹˜3: ì˜ì2,1 ì•‰ìŒ â†’ [2,1] ì™„ì„±
```

### ì½”ë“œë¡œ ì´í•´í•˜ê¸°

```javascript
// n=3, m=2 ì˜ˆì‹œ

visited = [F,F,F,F]
â†’ 1 ì„ íƒ: visited[1]=true  â†’ [F,T,F,F]
  â†’ 2 ì„ íƒ: visited[2]=true â†’ [F,T,T,F] â†’ ì¶œë ¥ "1 2"
  â† 2 ì·¨ì†Œ: visited[2]=false â†’ [F,T,F,F] // 2ë¥¼ ë‹¤ì‹œ ì“¸ ìˆ˜ ìˆê²Œ!
  â†’ 3 ì„ íƒ: visited[3]=true â†’ [F,T,F,T] â†’ ì¶œë ¥ "1 3"
  â† 3 ì·¨ì†Œ: visited[3]=false â†’ [F,T,F,F]
â† 1 ì·¨ì†Œ: visited[1]=false â†’ [F,F,F,F]

â†’ 2 ì„ íƒ: visited[2]=true  â†’ [F,F,T,F]
  â†’ 1 ì„ íƒ: visited[1]=true â†’ [F,T,T,F] â†’ ì¶œë ¥ "2 1"
  // â†‘ 1ì„ ë‹¤ì‹œ ì‚¬ìš© ê°€ëŠ¥! (ìœ„ì—ì„œ ì·¨ì†Œí–ˆìœ¼ë‹ˆê¹Œ)
```

**í•µì‹¬: ì„ íƒ ì·¨ì†Œ = "ë‹¤ë¥¸ ê²½ë¡œì—ì„œ ê°™ì€ ìˆ«ìë¥¼ ë‹¤ì‹œ ì“¸ ìˆ˜ ìˆê²Œ í•˜ê¸°"**

---

## ì£¼ìš” ë¬¸ì œ ìœ í˜•

### 1. ìˆœì—´ (Permutation)
- ìˆœì„œê°€ ì¤‘ìš”í•¨
- [1,2]ì™€ [2,1]ì€ ë‹¤ë¦„
- **ì˜ˆì‹œ**: Nê³¼ M (1), (3), (5)

### 2. ì¡°í•© (Combination)
- ìˆœì„œê°€ ì¤‘ìš”í•˜ì§€ ì•ŠìŒ
- [1,2]ì™€ [2,1]ì€ ê°™ìŒ
- ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì¶œë ¥
- **ì˜ˆì‹œ**: Nê³¼ M (2), (4)

### 3. ì¤‘ë³µ ìˆœì—´/ì¡°í•©
- ê°™ì€ ìˆ˜ë¥¼ ì—¬ëŸ¬ ë²ˆ ì„ íƒ ê°€ëŠ¥
- visited ì²´í¬ ë¶ˆí•„ìš”
- **ì˜ˆì‹œ**: Nê³¼ M (3), (4)

### 4. ë³µì¡í•œ ì œì•½ì¡°ê±´
- N-Queen, ìŠ¤ë„ì¿  ë“±

---

## ì¶”ì²œ ë¬¸ì œ (ë‚œì´ë„ìˆœ)

### ğŸŸ¢ ê¸°ì´ˆ - ë°±íŠ¸ë˜í‚¹ ì…ë¬¸
| ë²ˆí˜¸ | ë¬¸ì œ | ì„¤ëª… |
|------|------|------|
| **15649** | **Nê³¼ M (1)** | ê¸°ë³¸ ìˆœì—´ - ì˜¤ëŠ˜ í‘¼ ë¬¸ì œ! |
| **15650** | **Nê³¼ M (2)** | ê¸°ë³¸ ì¡°í•© |
| **15651** | **Nê³¼ M (3)** | ì¤‘ë³µ ìˆœì—´ (visited ë¶ˆí•„ìš”) |
| **15652** | **Nê³¼ M (4)** | ì¤‘ë³µ ì¡°í•© |
| **6603** | ë¡œë˜ | ì¡°í•© ì—°ìŠµ |

### ğŸŸ¡ ì¤‘ê¸‰ - ì‘ìš© ë¬¸ì œ
| ë²ˆí˜¸ | ë¬¸ì œ | ì„¤ëª… |
|------|------|------|
| **15654** | Nê³¼ M (5) | ì£¼ì–´ì§„ ìˆ˜ë¡œ ìˆœì—´ ë§Œë“¤ê¸° |
| **15655** | Nê³¼ M (6) | ì£¼ì–´ì§„ ìˆ˜ë¡œ ì¡°í•© ë§Œë“¤ê¸° |
| **15663** | Nê³¼ M (9) | ì¤‘ë³µ ìˆëŠ” ìˆœì—´ |
| **15664** | Nê³¼ M (10) | ì¤‘ë³µ ìˆëŠ” ì¡°í•© |
| **1182** | ë¶€ë¶„ìˆ˜ì—´ì˜ í•© | ì¡°í•© + í•© ì²´í¬ |
| **9663** | N-Queen | ë°±íŠ¸ë˜í‚¹ ëŒ€í‘œ ë¬¸ì œ |

### ğŸ”´ ê³ ê¸‰ - ë³µì¡í•œ ì œì•½ì¡°ê±´
| ë²ˆí˜¸ | ë¬¸ì œ | ì„¤ëª… |
|------|------|------|
| **2580** | ìŠ¤ë„ì¿  | ë³µì¡í•œ ì œì•½ì¡°ê±´ |
| **1987** | ì•ŒíŒŒë²³ | 2ì°¨ì› ë°±íŠ¸ë˜í‚¹ |
| **14888** | ì—°ì‚°ì ë¼ì›Œë„£ê¸° | ìˆœì—´ ì‘ìš© |
| **14889** | ìŠ¤íƒ€íŠ¸ì™€ ë§í¬ | ì¡°í•© ì‘ìš© |

---

## í•™ìŠµ ìˆœì„œ ì¶”ì²œ

```
1ë‹¨ê³„: Nê³¼ M (1) ~ (4)
       â†’ ìˆœì—´, ì¡°í•©ì˜ ê¸°ë³¸ íŒ¨í„´ ìµíˆê¸°

2ë‹¨ê³„: Nê³¼ M (5) ~ (8)
       â†’ ì…ë ¥ì´ ì£¼ì–´ì§„ ê²½ìš°

3ë‹¨ê³„: Nê³¼ M (9) ~ (12)
       â†’ ì¤‘ë³µ ì²˜ë¦¬

4ë‹¨ê³„: ë¶€ë¶„ìˆ˜ì—´ì˜ í•©, ë¡œë˜
       â†’ ì‹¤ì „ ì‘ìš©

5ë‹¨ê³„: N-Queen, ìŠ¤ë„ì¿ 
       â†’ ë³µì¡í•œ ì œì•½ì¡°ê±´
```

---

## ì‹¤ì „ íŒ

### 1. ë¬¸ì œ ì½ê³  íŒë‹¨í•˜ê¸°
```
ì§ˆë¬¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:
âœ“ ëª¨ë“  ê²½ìš°ë¥¼ ë´ì•¼ í•˜ë‚˜?
âœ“ ì„ íƒí•  ë•Œ ì œì•½ì´ ìˆë‚˜?
âœ“ ë‹µì´ ì—¬ëŸ¬ ê°œì¸ê°€?

â†’ ëª¨ë‘ YESë©´ ë°±íŠ¸ë˜í‚¹!
```

### 2. ì½”ë“œ ì‘ì„± ìˆœì„œ
```
1. ì¢…ë£Œ ì¡°ê±´ ë¨¼ì € ì‘ì„± (ì™„ì„± ì¡°ê±´)
2. forë¬¸ìœ¼ë¡œ ì„ íƒì§€ ë‚˜ì—´
3. ì„ íƒ â†’ ì¬ê·€ â†’ ì„ íƒì·¨ì†Œ ì„¸íŠ¸ë¡œ ì‘ì„±
4. visited ë°°ì—´/ìƒíƒœ ê´€ë¦¬
```

### 3. ë””ë²„ê¹… íŒ
```javascript
// ê³¼ì •ì„ ë³´ê³  ì‹¶ìœ¼ë©´
const backtrack = (arr, depth) => {
    console.log('  '.repeat(depth) + `í˜„ì¬: [${arr}]`);
    // ...
};
```

### 4. ì‹œê°„ë³µì¡ë„
```
ìˆœì—´: O(N!)
ì¡°í•©: O(2^N) ë˜ëŠ” O(N^M)
â†’ Nì´ í¬ë©´(N>20) ë°±íŠ¸ë˜í‚¹ìœ¼ë¡œ í•´ê²° ì–´ë ¤ì›€
```

---

## ìì£¼í•˜ëŠ” ì‹¤ìˆ˜

### âŒ ì‹¤ìˆ˜ 1: ì„ íƒ ì·¨ì†Œ ì•ˆ í•¨
```javascript
visited[i] = true;
backtrack(arr);
// visited[i] = false;  â† ì´ê±° ë¹ ëœ¨ë¦¼!
```

### âŒ ì‹¤ìˆ˜ 2: ë°°ì—´ ë³µì‚¬ ì•ˆ í•¨
```javascript
if (arr.length === m) {
    result.push(arr);  // âŒ ì°¸ì¡° ì €ì¥
    result.push([...arr]);  // âœ… ë³µì‚¬ë³¸ ì €ì¥
}
```

### âŒ ì‹¤ìˆ˜ 3: ì¢…ë£Œ ì¡°ê±´ í›„ return ì•ˆ í•¨
```javascript
if (arr.length === m) {
    console.log(arr.join(' '));
    // return;  â† ì´ê±° ì—†ìœ¼ë©´ ê³„ì† ì§„í–‰ë¨!
}
```

---

## í•µì‹¬ ì •ë¦¬

```
ë°±íŠ¸ë˜í‚¹ = ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ íƒìƒ‰ + ê°€ì§€ì¹˜ê¸°

íŒ¨í„´:
1. ì„ íƒ (visited[i] = true, arr.push(i))
2. ì¬ê·€ (backtrack(ë‹¤ìŒìƒíƒœ))
3. ì„ íƒ ì·¨ì†Œ (visited[i] = false, arr.pop())

ì´ 3ë‹¨ê³„ê°€ í•µì‹¬!
```

---

## ë‹¤ìŒ ë‹¨ê³„

1. **Nê³¼ M (2)** ë¬¸ì œë¡œ ì¡°í•© íŒ¨í„´ ìµíˆê¸°
2. **Nê³¼ M (3), (4)** ë¡œ ì¤‘ë³µ í—ˆìš© ì¼€ì´ìŠ¤ ì—°ìŠµ
3. **ë¶€ë¶„ìˆ˜ì—´ì˜ í•©** ìœ¼ë¡œ ì‹¤ì „ ì‘ìš©
4. **N-Queen** ìœ¼ë¡œ ë³µì¡í•œ ì œì•½ì¡°ê±´ ë„ì „

í™”ì´íŒ…! ğŸ”¥
