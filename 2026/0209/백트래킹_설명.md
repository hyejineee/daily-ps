# 백트래킹: 선택 취소를 왜 해야 할까?

## 비유로 이해하기

레스토랑에서 3개의 의자 중 2개를 골라 앉는 상황을 생각해보세요.

### ❌ 선택 취소를 안 하면
```
1번째 손님: 의자1 앉음 → 의자2 앉음 → [1, 2] 조합 완성
2번째 손님: 어? 의자1,2가 아직 '사용중' 표시가 되어있네?
           → 의자3밖에 못 앉음 → [3, ?] 조합 불가능
```

### ✅ 선택 취소를 하면
```
1번째 손님: 의자1 앉음 → 의자2 앉음 → [1, 2] 기록
           → 일어남(의자 1,2 다시 '사용가능')

2번째 손님: 의자1 앉음 → 의자3 앉음 → [1, 3] 기록
           → 일어남

3번째 손님: 의자2 앉음 → 의자1 앉음 → [2, 1] 기록
           ...
```

## 코드에서의 동작

```javascript
for (let i = 1; i <= n; i++) {
    if (!visited[i]) {
        // 🔴 1단계: 선택
        visited[i] = true;
        arr.push(i);

        // 🔵 2단계: 이 선택을 바탕으로 다음 단계 진행
        backtrack(arr);

        // 🟢 3단계: 선택 취소 (다른 경로를 위해 원상복구)
        arr.pop();
        visited[i] = false;
    }
}
```

## 실제 예시: n=3, m=2

```
visited 상태 변화:
[F,F,F,F] → 1선택 → [F,T,F,F] → 2선택 → [F,T,T,F] ✓ 출력
                                        → 2취소 → [F,T,F,F]
                                 → 3선택 → [F,T,F,T] ✓ 출력
                                        → 3취소 → [F,T,F,F]
          → 1취소 → [F,F,F,F]

          → 2선택 → [F,F,T,F] → 1선택 → [F,T,T,F] ✓ 출력
                                        → 1취소 → [F,F,T,F]
                                 → 3선택 → [F,F,T,T] ✓ 출력
```

## 핵심 포인트

**선택 취소를 하지 않으면 = 한 번 사용한 숫자를 영영 못 씀**
- [1,2] 만들 때 1,2를 사용했으면
- [2,1], [2,3], [3,1] 등을 만들 수 없게 됨!

**선택 취소를 하면 = 모든 조합을 시도할 수 있음**
- 각 조합을 만든 후 "원상복구"
- 다음 조합을 위해 같은 숫자를 다시 사용 가능
